<!doctype html>
<html lang="en">
	<head>
		<title>{{ stlFile }}</title>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<script type="importmap">
			{
				"imports": {
					"three": "https://cdn.jsdelivr.net/npm/three@0.180.0/build/three.module.js",
					"three/addons/": "https://cdn.jsdelivr.net/npm/three@0.180.0/examples/jsm/"
				}
			}
		</script>
		<script>
			window.STL_URL = new URL("{{ stlFile }}", window.location.href);
		</script>
		{% w3_theme theme %}
		<style>
			body {
				margin: 0;
				padding: 0;
				display: flex;
				height: 100vh;
			}

			pre {
				padding: 0.5rem;
				overflow-x: auto;
				background-color: hsla(0, 0%, 100%, 0.1);
			}

			#info {
				width: 40%;
				padding: 0 2rem;
				box-sizing: border-box;
				overflow: auto;

				& h1 {
					font-size: 3rem;
					margin: 1rem 0;
				}

				& table tr td:first-child {
					text-align: right;
					padding-right: 5px;
				}
			}

			#viewer {
				flex: 1;
				position: relative;
				overflow: hidden;
				background: radial-gradient(120% 80% at 50% 10%, rgba(0, 0, 0, 0.15), #0000 60%), linear-gradient(#000, #184284 70%);
				perspective: 1200px;
			}

			#viewer::after,
			#viewer::before {
				position: absolute;
				z-index: 0;
				/* baseline */
			}

			#viewer canvas {
				position: relative;
				z-index: 1000;
				background-color: transparent;
			}

			/* grid floor */
			#viewer::before {
				content: "";
				z-index: 2;
				left: -50%;
				right: -50%;
				bottom: 0;
				height: 100%;
				transform-origin: center bottom;
				transform: rotateX(55deg) translateZ(-100px);
				background: repeating-linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 0 40px, rgba(255, 255, 255, 0.15) 40px 42px), repeating-linear-gradient(to right, rgba(255, 255, 255, 0.05) 0 80px, rgba(255, 255, 255, 0.15) 80px 82px);
				background-color: #000;
			}

			/* horizon glow */
			#viewer::after {
				content: "";
				z-index: 1;
				left: 0;
				right: 0;
				bottom: 50%;
				height: 0;
				background: linear-gradient(90deg, transparent, #74f5ff, transparent);
				box-shadow: 0 0 12px 2px #74f5ff, 0 0 28px 6px #74f5ff, 0 0 60px 12px #74f5ff;
			}
		</style>
	</head>

	<body>
		{# Details & Code / Left Side #}
		<div id="info">
			<h1>{{ title }}</h1>
			<h3>
				<a href="./{{ stlFile }}">Download {{ stlFile }}</a>
			</h3>
			<h2>File Content</h2>
			<pre>{{ content | safe }}</pre>
		</div>

		{# Container for STL / Right Side #}
		<div id="viewer"></div>

		{# Three.js Renderer #}
		<script type="module">
			{{ rendererJS | safe }}
		</script>
	</body>
</html>
